
/* --- VARIÁVEIS & RESET (V28 Premium) --- */
:root {
    --primary: #007AFF; /* Azul iOS */
    --primary-dark: #0062cc;
    --success: #34C759; /* Verde iOS */
    --danger: #FF3B30; /* Vermelho iOS */
    --warning: #FF9500; /* Laranja iOS */
    --purple: #AF52DE; /* Roxo iOS */
    
    --bg-app: #F2F2F7; /* Fundo padrão iOS */
    --bg-card: #FFFFFF;
    --bg-input: #E5E5EA;
    
    --text-main: #000000;
    --text-sec: #8E8E93;
    --separator: #C6C6C8;
    
    --radius-l: 20px;
    --radius-m: 12px;
    --radius-s: 8px;
    
    --shadow-card: 0 2px 8px rgba(0,0,0,0.08);
    --shadow-float: 0 4px 12px rgba(0,0,0,0.15);
    
    --safe-area-bottom: env(safe-area-inset-bottom, 20px);
}

[v-cloak] { display: none !important; }
* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

body {
    margin: 0; padding: 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    background-color: var(--bg-app);
    color: var(--text-main);
    height: 100vh; overflow: hidden; /* Evita scroll na tela de login */
}

/* --- ANIMAÇÕES --- */
.animated-fade { animation: fadeIn 0.3s ease-out; }
.animated-up { animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1); }
.shake { animation: shake 0.4s linear; }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes slideUp { from { transform: translateY(30px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
@keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-10px); } 75% { transform: translateX(10px); } }
.pop-enter-active { animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
.pop-leave-active { animation: popOut 0.2s ease-in; }
@keyframes popIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
@keyframes popOut { to { transform: scale(0.8); opacity: 0; } }

/* --- TELA DE LOGIN PREMIUM --- */
.login-screen {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: var(--bg-app); z-index: 5000;
    display: flex; align-items: center; justify-content: center;
    padding: 20px;
}
.login-container {
    width: 100%; max-width: 340px;
    text-align: center;
}
.login-header { margin-bottom: 30px; }
.logo-circle {
    width: 80px; height: 80px; background: var(--danger); color: white;
    border-radius: 50%; display: flex; align-items: center; justify-content: center;
    font-size: 36px; margin: 0 auto 15px;
    box-shadow: 0 4px 10px rgba(255, 59, 48, 0.3);
}
.login-header h2 { margin: 0; font-size: 28px; font-weight: 800; letter-spacing: -0.5px; }
.login-header p { color: var(--text-sec); margin: 5px 0 0; }

.pin-feedback { display: flex; justify-content: center; gap: 15px; margin-bottom: 20px; }
.pin-dot {
    width: 14px; height: 14px; border-radius: 50%;
    border: 2px solid var(--text-sec); transition: all 0.2s;
}
.pin-dot.filled { background: var(--text-main); border-color: var(--text-main); transform: scale(1.1); }

.error-msg-container { min-height: 25px; margin-bottom: 20px; }
.error-text { color: var(--danger); font-weight: 600; margin: 0; }

.numpad-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; justify-items: center; }
.num-btn {
    width: 75px; height: 75px; border-radius: 50%; border: none;
    background: var(--bg-card); font-size: 28px; font-weight: 500;
    color: var(--text-main); box-shadow: var(--shadow-card);
    cursor: pointer; transition: background 0.1s;
}
.num-btn:active { background: var(--input-bg); }
.backspace-btn {
    width: 75px; height: 75px; border: none; background: transparent;
    font-size: 24px; color: var(--text-sec); cursor: pointer;
}

.setup-box {
    background: var(--bg-card); padding: 20px; border-radius: var(--radius-m);
    margin-top: 30px; box-shadow: var(--shadow-card);
}
.setup-box h3 { margin: 0 0 10px; color: var(--primary); display: flex; align-items: center; justify-content: center; gap: 8px; }
.pin-input-wrapper { margin: 10px auto; width: 60%; }
.pin-field { text-align: center; font-size: 20px; letter-spacing: 5px; font-weight: bold; }


/* --- APP LAYOUT --- */
.app-wrapper { height: 100%; display: flex; flex-direction: column; }

/* NAVBAR ESTILO IOS */
.ios-nav-bar {
    height: 50px; background: rgba(255,255,255,0.9); backdrop-filter: blur(10px);
    border-bottom: 1px solid var(--separator); display: flex; align-items: center;
    justify-content: space-between; padding: 0 10px; flex-shrink: 0;
    position: relative; z-index: 100;
}
.nav-left, .nav-right { width: 80px; display: flex; }
.nav-right { justify-content: flex-end; }
.nav-title { font-weight: 600; font-size: 17px; text-align: center; flex: 1; }
.nav-btn {
    background: none; border: none; color: var(--primary); font-size: 16px;
    display: flex; align-items: center; gap: 5px; padding: 10px; cursor: pointer;
}
.back-btn i { font-size: 20px; margin-bottom: 2px; }
.logout-btn { color: var(--danger); }

.app-content { flex: 1; overflow-y: auto; position: relative; }

/* MENU INICIAL (HOME) */
.home-menu { padding: 20px; }
.user-greeting-card {
    display: flex; justify-content: space-between; align-items: center;
    margin-bottom: 25px; padding: 10px;
}
.greeting-text h1 { margin: 0; font-size: 28px; font-weight: 800; }
.greeting-text p { margin: 5px 0 0; color: var(--text-sec); text-transform: capitalize; }
.user-avatar { font-size: 45px; color: var(--primary); opacity: 0.8; }

.menu-grid-buttons { display: grid; gap: 15px; margin-bottom: 25px; }
.menu-btn {
    border: none; border-radius: var(--radius-m); padding: 20px;
    display: flex; align-items: center; gap: 15px; text-align: left;
    color: white; font-weight: 600; font-size: 18px;
    box-shadow: var(--shadow-card); transition: transform 0.1s;
    cursor: pointer;
}
.menu-btn:active { transform: scale(0.98); }
.btn-icon { 
    width: 45px; height: 45px; background: rgba(255,255,255,0.2); 
    border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 22px; 
}
.btn-sacolao { background: linear-gradient(135deg, #34C759, #30B350); }
.btn-geral { background: linear-gradient(135deg, #FF9500, #E68600); }
.btn-todos { background: linear-gradient(135deg, #007AFF, #0062CC); }

.secondary-actions { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
.sec-btn {
    background: var(--bg-card); border: none; padding: 15px; border-radius: var(--radius-m);
    color: var(--primary); font-weight: 600; font-size: 16px; display: flex; align-items: center; justify-content: center; gap: 8px;
    box-shadow: var(--shadow-card); cursor: pointer;
}

/* LISTA DE PRODUTOS */
.counting-list { padding-bottom: 80px; }
.notice-banner {
    padding: 12px 20px; color: white; font-weight: 600; font-size: 14px;
    display: flex; align-items: center; gap: 10px; box-shadow: var(--shadow-card);
}
.notice-banner.orange { background: var(--warning); }
.notice-banner.purple { background: var(--purple); }

.search-container { background: var(--bg-app); padding: 10px 15px; }
.sticky-search { position: sticky; top: 0; z-index: 90; backdrop-filter: blur(5px); background: rgba(242,242,247,0.9); }
.ios-search-bar {
    background: #E3E3E8; border-radius: 10px; padding: 8px 12px;
    display: flex; align-items: center; color: var(--text-sec);
}
.ios-search-bar input {
    border: none; background: transparent; flex: 1; margin-left: 8px;
    font-size: 16px; padding: 5px 0; outline: none; color: var(--text-main);
}

.list-content { padding: 15px; }
.location-group { background: var(--bg-card); border-radius: var(--radius-m); overflow: hidden; margin-bottom: 20px; box-shadow: var(--shadow-card); }
.group-header {
    background: #E9E9F0; color: var(--text-sec); padding: 8px 15px;
    font-size: 13px; text-transform: uppercase; font-weight: 600; letter-spacing: 0.5px;
}
.product-item {
    padding: 15px; border-bottom: 1px solid var(--separator);
    display: flex; flex-direction: column; gap: 12px; transition: all 0.2s;
}
.product-item:last-child { border-bottom: none; }
.product-item.checked { background: #FAFAFC; }
.product-item.checked .prod-main { opacity: 0.5; }

.prod-main { display: flex; justify-content: space-between; align-items: flex-start; }
.prod-title { font-size: 17px; font-weight: 600; margin-bottom: 4px; }
.edit-icon { color: var(--text-sec); font-size: 14px; margin-left: 5px; padding: 5px; cursor: pointer; }
.prod-details { font-size: 13px; color: var(--text-sec); background: var(--bg-input); padding: 3px 8px; border-radius: 4px; display: inline-block; }
.dest-badge { font-size: 11px; color: var(--primary); background: rgba(0,122,255,0.1); padding: 4px 8px; border-radius: 12px; font-weight: 600; align-self: flex-start; white-space: nowrap; }

.prod-controls { display: flex; gap: 10px; height: 50px; }
.toggle-btn {
    width: 50px; border-radius: var(--radius-s); border: none; background: var(--bg-input);
    color: #C7C7CC; font-size: 20px; cursor: pointer; transition: 0.2s; display: flex; align-items: center; justify-content: center;
}
.toggle-btn.ignored { background: var(--text-main); color: var(--bg-card); }
.count-input {
    flex: 1; border: 2px solid var(--bg-input); border-radius: var(--radius-s);
    text-align: center; font-size: 24px; font-weight: 700; color: var(--text-main);
    outline: none; transition: 0.2s; background: var(--bg-card);
}
.count-input:focus { border-color: var(--primary); }

.prod-feedback { font-size: 14px; font-weight: 600; text-align: right; }
.status-pedir { color: var(--danger); }
.status-ok { color: var(--success); }

.fab-finish {
    position: fixed; bottom: calc(20px + var(--safe-area-bottom)); right: 20px;
    background: var(--primary); color: white; border: none;
    padding: 15px 25px; border-radius: 30px; font-size: 16px; font-weight: 600;
    box-shadow: 0 4px 15px rgba(0,122,255,0.4); cursor: pointer;
    display: flex; align-items: center; gap: 8px; z-index: 200;
}

/* --- MODAIS (ESTILO SHEET) --- */
.modal-backdrop {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0,0,0,0.5); z-index: 3000;
    display: flex; align-items: flex-end;
}
.modal-sheet {
    background: var(--bg-app); width: 100%; height: 92vh;
    border-radius: var(--radius-l) var(--radius-l) 0 0;
    display: flex; flex-direction: column; overflow: hidden;
    box-shadow: 0 -5px 25px rgba(0,0,0,0.15);
}
.modal-header-bar {
    background: var(--bg-card); padding: 15px 20px; border-bottom: 1px solid var(--separator);
    display: flex; justify-content: space-between; align-items: center; flex-shrink: 0;
}
.modal-header-bar h3 { margin: 0; font-size: 18px; font-weight: 700; }
.close-modal-btn { background: none; border: none; color: var(--primary); font-size: 16px; font-weight: 600; cursor: pointer; }
.modal-scroll-content { flex: 1; overflow-y: auto; padding: 20px; padding-bottom: calc(80px + var(--safe-area-bottom)); }

/* COMPONENTES DE FORM & LISTA (Ajustes) */
.settings-section { background: var(--bg-card); border-radius: var(--radius-m); overflow: hidden; margin-bottom: 25px; box-shadow: var(--shadow-card); }
.section-header {
    background: #E9E9F0; color: var(--text-sec); padding: 12px 15px;
    font-size: 14px; text-transform: uppercase; font-weight: 700; letter-spacing: 0.5px;
    display: flex; align-items: center; gap: 8px;
}
.section-body { padding: 15px; }
.list-row { display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px solid var(--separator); }
.list-row:last-child { border-bottom: none; }
.list-row.dense { padding: 8px 0; } /* Para a lista de produtos */
.row-main { font-size: 16px; font-weight: 500; }
.row-main small { color: var(--text-sec); font-weight: 400; }
.row-main.truncated { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 80%; }

.admin-tag { font-size: 12px; color: var(--warning); background: rgba(255,149,0,0.1); padding: 3px 6px; border-radius: 4px; margin-left: 8px; }
.day-tag { font-weight: 700; color: var(--primary); width: 40px; display: inline-block; }
.restricted { text-align: center; color: var(--text-sec); padding: 25px; font-style: italic; display: flex; flex-direction: column; align-items: center; gap: 10px; }

.ios-input {
    width: 100%; padding: 12px; background: var(--bg-input); border: 1px solid transparent;
    border-radius: var(--radius-s); font-size: 16px; outline: none; margin-bottom: 10px; transition: 0.2s;
}
.ios-input:focus { background: var(--bg-card); border-color: var(--primary); }
.ios-textarea { width: 100%; padding: 12px; background: var(--bg-card); border: 1px solid var(--separator); border-radius: var(--radius-s); font-family: inherit; font-size: 16px; height: 80px; resize: none; }
.form-row { display: flex; gap: 10px; margin-bottom: 10px; }
.form-row .ios-input { margin-bottom: 0; }
.cols-2 .ios-input { width: 50%; }
select.ios-input { appearance: none; background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%238E8E93' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e"); background-repeat: no-repeat; background-position: right 10px center; background-size: 16px; padding-right: 30px; }

.ios-btn-primary, .ios-btn-danger, .save-btn {
    width: 100%; padding: 15px; border-radius: var(--radius-m); border: none;
    font-size: 17px; font-weight: 700; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px;
}
.ios-btn-primary, .save-btn { background: var(--primary); color: white; }
.ios-btn-primary:active { background: var(--primary-dark); }
.ios-btn-danger { background: transparent; color: var(--danger); border: 2px solid var(--danger); }
.danger-zone { border: 1px solid var(--danger); }
.danger-text { color: var(--text-sec); font-size: 13px; text-align: center; margin-top: 10px; }

/* INLINE FORMS (Add Usuário/Destino) */
.add-form-inline { display: flex; gap: 8px; margin-top: 15px; }
.inline-input { padding: 10px; background: var(--bg-input); border: none; border-radius: var(--radius-s); font-size: 15px; outline: none; }
.inline-input.grow { flex: 1; }
.inline-input.short { width: 70px; text-align: center; }
.add-btn-inline, .delete-btn {
    width: 40px; height: 40px; border: none; border-radius: var(--radius-s);
    display: flex; align-items: center; justify-content: center; cursor: pointer;
}
.add-btn-inline { background: var(--primary); color: white; }
.delete-btn { background: rgba(255, 59, 48, 0.1); color: var(--danger); }
.delete-btn.small { width: 30px; height: 30px; font-size: 12px; }


/* PREVIEW & HISTORY CARDS */
.preview-card, .history-card { background: var(--bg-card); border-radius: var(--radius-m); padding: 15px; margin-bottom: 15px; box-shadow: var(--shadow-card); }
.preview-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; padding-bottom: 10px; border-bottom: 1px solid var(--separator); }
.supplier-name { font-weight: 700; color: var(--primary); display: flex; align-items: center; gap: 8px; }
.item-count-badge { background: var(--bg-input); color: var(--text-sec); font-size: 12px; padding: 4px 8px; border-radius: 10px; font-weight: 600; }
.preview-list { padding-left: 20px; margin: 10px 0 15px; color: var(--text-main); line-height: 1.5; }
.whatsapp-btn {
    width: 100%; padding: 12px; background: #25D366; color: white; border: none;
    border-radius: var(--radius-s); font-weight: 700; font-size: 16px;
    display: flex; align-items: center; justify-content: center; gap: 8px; cursor: pointer;
}
.empty-state-modal { text-align: center; color: var(--text-sec); padding: 40px 20px; }
.empty-state-modal i { font-size: 50px; margin-bottom: 20px; opacity: 0.5; }

.hist-header { display: flex; justify-content: space-between; font-size: 13px; color: var(--text-sec); margin-bottom: 8px; }
.hist-meta { display: flex; gap: 15px; }
.hist-meta i, .hist-user i { margin-right: 5px; opacity: 0.7; }
.hist-user { font-weight: 600; color: var(--primary); }
.hist-dest { font-weight: 700; margin-bottom: 10px; display: flex; align-items: center; gap: 8px; }
.hist-body { background: var(--bg-app); padding: 12px; border-radius: var(--radius-s); white-space: pre-wrap; font-family: monospace; font-size: 13px; line-height: 1.4; }
.delete-hist-btn {
    margin-top: 10px; background: none; border: 1px solid var(--danger); color: var(--danger);
    padding: 8px; border-radius: var(--radius-s); font-size: 12px; cursor: pointer; width: 100%;
}
