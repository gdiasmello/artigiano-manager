<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="manifest" href="manifest.json">
    <title>Pizzeria Master</title>
    
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
</head>
<body class="bg-[#F2F2F7]">
    <div id="app" v-cloak>
        
        <div v-if="!authenticated" class="fixed inset-0 z-50 flex items-center justify-center bg-white p-6">
            <div class="w-full max-w-sm glass-card p-10 text-center" :class="{ 'shake-error': loginError }">
                <div class="mb-8">
                    <h1 class="text-4xl font-black text-[#008C45]">PIZZERIA</h1>
                    <h1 class="text-4xl font-black text-[#CD212A] mt-[-10px]">MASTER</h1>
                    <p class="text-[9px] tracking-[4px] text-gray-400 uppercase mt-2">Gest√£o de Insumos</p>
                </div>
                
                <select v-model="userSelected" class="ios-input mb-4 font-bold text-center appearance-none">
                    <option value="" disabled>SELECIONE UTILIZADOR</option>
                    <option v-for="u in equipe" :value="u">{{ u.nome }}</option>
                </select>

                <input type="password" v-model="pinInput" placeholder="PIN" class="ios-input text-center text-3xl tracking-[10px] mb-8" maxlength="4" inputmode="numeric">
                
                <button @click="login" class="ios-btn bg-[#008C45] w-full text-white shadow-lg">Entrar</button>
            </div>
        </div>

        <main v-if="authenticated && currentTab === 'home'" class="p-6 pt-12 animate-fade">
            <header class="mb-10 flex justify-between items-start">
                <div>
                    <h2 class="text-3xl font-black text-gray-800 italic">Ciao, {{ userSelected.nome }}!</h2>
                    <p class="text-xs font-bold text-gray-400 uppercase tracking-tighter">{{ dataAtual }}</p>
                </div>
                <div class="bg-white p-2 rounded-2xl shadow-sm border border-gray-100">
                    <span class="text-[10px] font-black text-[#008C45]">P. MASTER v1.0</span>
                </div>
            </header>

            <div class="grid grid-cols-2 gap-5">
                <div v-if="podeVer('insumos')" @click="currentTab = 'insumos'" class="tile-apple bg-[#008C45] text-white">
                    <span class="text-4xl mb-2">üì¶</span>
                    <span class="font-black uppercase text-[11px] tracking-widest">Insumos</span>
                </div>
                
                <div v-if="podeVer('historico')" @click="currentTab = 'historico'" class="tile-apple bg-white text-gray-800 border-2 border-gray-50">
                    <span class="text-4xl mb-2">üìú</span>
                    <span class="font-black uppercase text-[11px] tracking-widest text-gray-400">Hist√≥rico</span>
                </div>

                <div v-if="isAdmin" @click="currentTab = 'config'" class="tile-apple bg-[#CD212A] text-white">
                    <span class="text-4xl mb-2">‚öôÔ∏è</span>
                    <span class="font-black uppercase text-[11px] tracking-widest">Ajustes</span>
                </div>

                <div @click="logout" class="tile-apple bg-gray-100 text-gray-400">
                    <span class="text-4xl mb-2">üö™</span>
                    <span class="font-black uppercase text-[11px] tracking-widest">Sair</span>
                </div>
            </div>
        </main>

        </div>
    <script src="script.js"></script>
    <script>
        // C√ìDIGO PARA INSTALAR NA TELA INICIAL (SERVICE WORKER)
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js').then(function() {
                console.log('Pizzeria Master: Service Worker Ativo');
            });
        }
    </script>
</body>
</html>
